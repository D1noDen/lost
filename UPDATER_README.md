# Налаштування electron-updater

## Що було додано:

### 1. Пакети
- `electron-updater` - основний пакет для автоматичного оновлення
- `electron-log` - для логування процесу оновлення

### 2. Файли конфігурації
- Оновлено `package.json` з налаштуваннями збірки
- Додано `dev-app-update.yml` для тестування

### 3. Функціональність
- Автоматична перевірка оновлень при запуску
- UI повідомлення про статус оновлення
- Прогрес-бар завантаження
- Ручна перевірка оновлень через кнопку
- Відображення поточної версії

## Налаштування для роботи:

### 1. Для GitHub Releases:
1. Створіть репозиторій на GitHub
2. В `package.json` змініть налаштування publish:
   ```json
   "publish": {
     "provider": "github",
     "owner": "ваш-github-username",
     "repo": "назва-репозиторію"
   }
   ```
3. Створіть GitHub Personal Access Token з правами repo
4. Встановіть змінну середовища: `GH_TOKEN=ваш_токен`

### 2. Для власного сервера:
1. Змініть `dev-app-update.yml`:
   ```yaml
   provider: generic
   url: https://ваш-сервер.com/updates/
   ```
2. Структура на сервері:
   ```
   /updates/
     ├── latest.yml (Windows)
     ├── latest-mac.yml (macOS)
     ├── latest-linux.yml (Linux)
     └── ваша-програма-setup-1.0.1.exe
   ```

### 3. Команди для збірки:
```bash
# Встановлення залежностей
npm install

# Збірка без публікації
npm run dist

# Збірка з публікацією (потрібен токен)
npm run publish
```

### 4. Тестування:
1. Зберіть додаток: `npm run dist`
2. Встановіть збудовану версію
3. Змініть версію в package.json (наприклад, на 1.0.1)
4. Зберіть нову версію та опублікуйте
5. Запустіть попередню версію - вона знайде і завантажить оновлення

## Безпека:
- Всі оновлення підписуються цифровим підписом
- Перевіряється цілісність файлів
- Користувач може відхилити встановлення оновлення

## Функції в коді:
- `initUpdater()` - ініціалізація системи оновлень
- `checkForUpdates()` - ручна перевірка оновлень
- `showUpdateNotification()` - показ повідомлень
- `showUpdateProgress()` - відображення прогресу

## Події electron-updater:
- `checking-for-update` - початок перевірки
- `update-available` - знайдено оновлення
- `update-not-available` - оновлення відсутні
- `download-progress` - прогрес завантаження
- `update-downloaded` - оновлення завантажено
- `error` - помилка в процесі
